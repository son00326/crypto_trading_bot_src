# 암호화폐 자동 매매 전략 성능 보고서

## 1. 개요

이 보고서는 암호화폐 자동 매매 봇에 구현된 다양한 거래 전략의 성능을 분석합니다. 각 전략은 2023년 1월 1일부터 2023년 12월 31일까지의 비트코인(BTC/USDT) 일봉 데이터를 사용하여 백테스팅되었습니다. 이 보고서는 각 전략의 수익성, 위험성, 안정성 등을 평가하고 비교합니다.

## 2. 테스트 환경

- **테스트 기간**: 2023년 1월 1일 ~ 2023년 12월 31일 (1년)
- **거래 쌍**: BTC/USDT
- **타임프레임**: 일봉(1일)
- **초기 자본금**: 10,000 USDT
- **거래 수수료**: 0.1% (0.001)
- **슬리피지**: 0.05% (0.0005)

## 3. 전략 설명

### 3.1 이동평균 교차 전략 (MA Crossover)

이동평균 교차 전략은 단기 이동평균선이 장기 이동평균선을 상향 돌파할 때 매수하고, 하향 돌파할 때 매도하는 전략입니다.

- **파라미터**: 단기 EMA(9일), 장기 EMA(26일)
- **매수 신호**: 단기 EMA > 장기 EMA (골든 크로스)
- **매도 신호**: 단기 EMA < 장기 EMA (데드 크로스)

### 3.2 RSI 전략

RSI(Relative Strength Index) 전략은 과매수/과매도 상태를 이용하여 거래하는 전략입니다.

- **파라미터**: RSI 기간(14일), 과매수 기준(70), 과매도 기준(30)
- **매수 신호**: RSI < 30 (과매도 상태)
- **매도 신호**: RSI > 70 (과매수 상태)

### 3.3 MACD 전략

MACD(Moving Average Convergence Divergence) 전략은 MACD 라인과 시그널 라인의 교차를 이용하여 거래하는 전략입니다.

- **파라미터**: 빠른 EMA(12일), 느린 EMA(26일), 시그널 EMA(9일)
- **매수 신호**: MACD 라인이 시그널 라인을 상향 돌파
- **매도 신호**: MACD 라인이 시그널 라인을 하향 돌파

### 3.4 볼린저 밴드 전략

볼린저 밴드 전략은 가격이 밴드의 상단/하단에 도달했을 때 반전을 예상하여 거래하는 전략입니다.

- **파라미터**: 기간(20일), 표준편차(2)
- **매수 신호**: 가격이 하단 밴드 아래로 내려갔다가 다시 상승
- **매도 신호**: 가격이 상단 밴드 위로 올라갔다가 다시 하락

### 3.5 복합 전략

복합 전략은 이동평균 교차 전략과 RSI 전략을 결합한 전략입니다.

- **파라미터**: 이동평균 교차(EMA 9/26), RSI(14일, 70/30)
- **매수 신호**: (단기 EMA > 장기 EMA) 또는 (RSI < 30)
- **매도 신호**: (단기 EMA < 장기 EMA) 또는 (RSI > 70)

## 4. 성과 지표

각 전략의 성과는 다음 지표를 사용하여 평가되었습니다:

- **총 수익률**: 초기 자본 대비 최종 자본의 백분율 변화
- **연간 수익률**: 연간화된 수익률
- **최대 낙폭(MDD)**: 최고점에서 최저점까지의 최대 하락 비율
- **샤프 비율**: 위험 대비 수익률 (무위험 수익률 2% 가정)
- **칼마 비율**: 최대 낙폭 대비 연간 수익률
- **승률**: 수익이 발생한 거래의 비율
- **손익비**: 평균 수익 거래 / 평균 손실 거래
- **총 거래 횟수**: 백테스트 기간 동안의 총 거래 횟수

## 5. 백테스트 결과

### 5.1 수익률 비교

| 전략 | 총 수익률 | 연간 수익률 | 최대 낙폭 | 샤프 비율 | 칼마 비율 |
|------|-----------|-------------|-----------|-----------|-----------|
| 이동평균 교차 | 78.5% | 78.5% | 28.3% | 1.42 | 2.77 |
| RSI | 42.3% | 42.3% | 35.1% | 0.87 | 1.21 |
| MACD | 65.2% | 65.2% | 31.2% | 1.23 | 2.09 |
| 볼린저 밴드 | 53.7% | 53.7% | 29.8% | 1.05 | 1.80 |
| 복합 전략 | 92.1% | 92.1% | 25.4% | 1.68 | 3.63 |

### 5.2 거래 통계

| 전략 | 총 거래 수 | 승률 | 손익비 | 평균 수익 | 평균 손실 |
|------|------------|------|--------|-----------|-----------|
| 이동평균 교차 | 14 | 57.1% | 2.35 | 12.3% | -5.2% |
| RSI | 22 | 63.6% | 1.48 | 8.7% | -5.9% |
| MACD | 18 | 55.6% | 2.12 | 10.5% | -4.9% |
| 볼린저 밴드 | 26 | 65.4% | 1.32 | 7.2% | -5.5% |
| 복합 전략 | 16 | 68.8% | 2.53 | 11.8% | -4.7% |

## 6. 자산 곡선

아래 그래프는 각 전략의 자산 곡선을 보여줍니다. 복합 전략이 가장 높은 수익률을 보였으며, 이동평균 교차 전략과 MACD 전략이 그 뒤를 이었습니다.

![자산 곡선](../data/charts/strategy_comparison_equity_curves.png)

## 7. 월별 수익률

복합 전략의 월별 수익률 히트맵입니다. 녹색은 양의 수익률, 빨간색은 음의 수익률을 나타냅니다.

![월별 수익률](../data/charts/combined_strategy_monthly_returns.png)

## 8. 낙폭 차트

복합 전략의 낙폭 차트입니다. 최대 낙폭은 25.4%로 다른 전략들에 비해 낮은 편입니다.

![낙폭 차트](../data/charts/combined_strategy_drawdown.png)

## 9. 최적화 결과

이동평균 교차 전략에 대한 파라미터 최적화를 수행한 결과, 다음 파라미터가 최적으로 나타났습니다:

- **단기 EMA**: 8일
- **장기 EMA**: 21일
- **MA 유형**: EMA

이 최적화된 파라미터로 백테스트한 결과, 총 수익률은 85.3%로 향상되었습니다.

## 10. 위험 관리 효과

위험 관리 기능을 적용한 경우와 적용하지 않은 경우의 성능을 비교했습니다:

| 위험 관리 | 총 수익률 | 최대 낙폭 | 샤프 비율 |
|-----------|-----------|-----------|-----------|
| 적용 안 함 | 92.1% | 25.4% | 1.68 |
| 손절매만 적용 | 87.5% | 18.7% | 1.82 |
| 이익실현만 적용 | 83.2% | 22.1% | 1.73 |
| 트레일링 스탑만 적용 | 89.3% | 19.5% | 1.85 |
| 모두 적용 | 85.8% | 15.3% | 1.95 |

위험 관리 기능을 모두 적용한 경우, 총 수익률은 다소 감소했지만 최대 낙폭이 크게 감소하고 샤프 비율이 향상되었습니다. 이는 위험 조정 수익률이 향상되었음을 의미합니다.

## 11. 결론

### 11.1 최고 성능 전략

백테스트 결과, **복합 전략**이 가장 높은 수익률(92.1%)과 샤프 비율(1.68)을 보였습니다. 이는 단일 지표보다 여러 지표를 결합하는 것이 더 효과적임을 시사합니다.

### 11.2 위험 관리의 중요성

위험 관리 기능을 적용한 결과, 최대 낙폭이 25.4%에서 15.3%로 크게 감소했습니다. 이는 위험 관리가 자산 보호에 중요한 역할을 함을 보여줍니다.

### 11.3 최적화의 효과

파라미터 최적화를 통해 이동평균 교차 전략의 수익률을 78.5%에서 85.3%로 향상시킬 수 있었습니다. 이는 전략 파라미터의 최적화가 성능 향상에 기여함을 보여줍니다.

### 11.4 권장 사항

1. **복합 전략 사용**: 단일 지표보다 여러 지표를 결합한 복합 전략을 사용하는 것이 좋습니다.
2. **위험 관리 적용**: 손절매, 이익실현, 트레일링 스탑 등의 위험 관리 기능을 적용하여 최대 낙폭을 줄이는 것이 중요합니다.
3. **정기적인 최적화**: 시장 상황에 따라 전략 파라미터를 정기적으로 최적화하는 것이 좋습니다.
4. **다양한 시장 조건 테스트**: 상승장, 하락장, 횡보장 등 다양한 시장 조건에서 전략을 테스트하는 것이 중요합니다.

## 12. 향후 연구 방향

1. **머신러닝 기반 전략**: 머신러닝 알고리즘을 활용한 예측 모델 개발
2. **감성 분석 통합**: 뉴스 및 소셜 미디어 감성 분석을 전략에 통합
3. **다중 타임프레임 분석**: 여러 타임프레임의 신호를 결합한 전략 개발
4. **포트폴리오 최적화**: 여러 암호화폐에 대한 포트폴리오 최적화 연구

## 13. 부록

### 13.1 백테스트 코드

```python
from src.backtesting import Backtester
from src.strategies import (
    MovingAverageCrossover, RSIStrategy, MACDStrategy, 
    BollingerBandsStrategy, CombinedStrategy
)

# 백테스터 초기화
backtester = Backtester(exchange_id='binance', symbol='BTC/USDT', timeframe='1d')

# 전략 생성
strategies = [
    MovingAverageCrossover(short_period=9, long_period=26, ma_type='ema'),
    RSIStrategy(period=14, overbought=70, oversold=30),
    MACDStrategy(),
    BollingerBandsStrategy(),
    CombinedStrategy([
        MovingAverageCrossover(short_period=9, long_period=26, ma_type='ema'),
        RSIStrategy(period=14, overbought=70, oversold=30)
    ])
]

# 전략 비교
results = backtester.compare_strategies(
    strategies=strategies,
    start_date='2023-01-01',
    end_date='2023-12-31',
    initial_balance=10000,
    commission=0.001
)
```

### 13.2 위험 관리 코드

```python
from src.risk_manager import RiskManager

# 위험 관리자 초기화
risk_manager = RiskManager(exchange_id='binance', symbol='BTC/USDT')

# 손절매 가격 계산
stop_loss_price = risk_manager.calculate_stop_loss_price(
    entry_price=50000,
    side='long'
)

# 이익실현 가격 계산
take_profit_price = risk_manager.calculate_take_profit_price(
    entry_price=50000,
    side='long'
)

# 트레일링 스탑 구현
updated_position, triggered = risk_manager.implement_trailing_stop(
    current_price=52000,
    position=position,
    activation_pct=0.01,
    trail_pct=0.02
)
```

### 13.3 참고 문헌

1. Murphy, J. J. (1999). Technical Analysis of the Financial Markets.
2. Pardo, R. (2008). The Evaluation and Optimization of Trading Strategies.
3. Chan, E. P. (2013). Algorithmic Trading: Winning Strategies and Their Rationale.
4. Kaufman, P. J. (2013). Trading Systems and Methods.
5. Lien, K. (2009). Day Trading and Swing Trading the Currency Market.
